# AGENTS.md（サンプル / 日本語）

エージェント（AI コーディングアシスタント）がこのリポジトリで作業する際の基本方針・手順・テンプレートをまとめたドキュメントです。必要に応じて修正・拡張してください。

## 言語

日本語ですべて回答してください

## 目的
- 一貫した進め方で安全かつ最短で成果を出す
- 作業の透明性（計画→実行→検証→共有）を保つ
- 破壊的変更や不要な差分を避け、最小限で目的達成

## クイックスタート
1. 依頼内容を簡潔に再掲し、不明点は質問する
2. 小さな計画（2–5 ステップ）を立て、共有する
3. 最小差分で実装し、必要なら段階的に進める
4. ローカルで検証（ビルド/テスト/静的チェック等）
5. 変更点を要点で共有し、次の提案を添える

## 作業スタイル
- 変更はタスクに直接関係する範囲に限定する
- 既存のスタイル・命名・構成に合わせる（無用な大改造を避ける）
- 複数案がある場合は、制約と比較で短く提案
- 大きい作業は早めに下書き/ドラフトで方向性を確認

## サンドボックスと権限
- 既定: ファイルはワークスペース内のみ編集、ネットワークは制限あり
- 破壊的操作（`rm -rf`、`git reset --hard` 等）は禁止。必要時は必ず事前合意
- ネットワーク/外部インストールが必要なら代替策を検討し、最小権限で申請

## コマンド実行ポリシー
- 読み取り系を優先（`git status`, `git diff`, `ls`, `cat`）
- 実行前に目的を 1 行で伝える（例: 「テストの失敗箇所を特定します」）
- 失敗時は即時リトライせず、原因を要約して方針提案

## 変更ポリシー
- 「根本原因の修正」を優先し、表層的ワークアラウンドは避ける
- 無関係な警告や別バグは触らない（簡潔に言及は可）
- 既存の設定・スクリプトを尊重し、同等機能の重複追加を避ける

## テストと検証
- 変更箇所に最も近い単位から検証
- テストやビルドが無い場合は、簡潔な手動確認手順を提示
- フォーマッタ/リンタがある場合は、それに従う

## 回答・記述スタイル
- 簡潔・具体・行動志向。余談を避ける
- 見出しや箇条書きで可読性を担保
- コマンド・パス・識別子はバッククォートで囲む（例: `make test`）

## よく使うプロンプト例
- 「この変更の受け入れ基準（期待結果/除外範囲）を教えてください」
- 「2 案あります。A は導入が簡単、B は拡張性が高い。どちらにしますか？」
- 「ローカルでの再現手順（コマンド/環境変数など）を共有いただけますか？」

## テンプレート

### 計画（Plan）
- 1. 要件確認・スコープ確定（in_progress）
- 2. 実装/修正
- 3. 検証（テスト/動作確認）
- 4. 変更点の共有・次の提案

状況に応じて 2–5 ステップ程度に調整。常に 1 つだけ `in_progress`。

### 変更サマリ
- 目的: <一言で>
- 主要変更: <箇条書きで 2–4 点>
- 影響範囲: <影響するコマンド/設定/依存>
- 検証: <実行コマンド/期待結果>
- 次の一手: <任意提案>

### コミットメッセージ
- タイトル: <領域>: <要約>
- ボディ: 背景/根拠、主要変更、確認方法、互換性/注意点

例:
```
brew: add codex formula

- Add `codex` to Brewfile list
- Verified `brew bundle --file=Brewfile dump` matches expected
```

## セキュリティ/プライバシー
- 秘密情報（トークン・鍵・個人情報）を作成・出力しない
- `.env` や認証情報の書き込み禁止。必要時はダミーで代替
- 外部送信が想定される操作は、必ず事前に確認

## トラブルシュート
- 依存不足: ローカルに依存導入できない場合は代替手順を提案
- 権限不足: 具体的な必要権限と理由を 1 行で提示
- 再現不可: 収集すべきログ/環境情報を最小で依頼

## 本リポジトリ特有の補足（例）
- `Brewfile` 更新時は、差分を最小化し並び順/フォーマットを維持
- 実機適用はユーザーが行う前提で、確認コマンドのみ提示
  - 例: `brew bundle --no-upgrade --file=Brewfile`（ドライランは環境に合わせて）

---
この AGENTS.md はサンプルです。チームの運用に合わせて方針・テンプレを更新してください。
